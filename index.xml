<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>高振宇的Blog</title>
    <link>https://zhyu-gao.github.io/</link>
    <description>Recent content on 高振宇的Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>zh-cn</language>
    <copyright>Gaozhenyu</copyright>
    <lastBuildDate>Sat, 27 Mar 2021 14:22:51 +0800</lastBuildDate>
    
        <atom:link href="https://zhyu-gao.github.io/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>Spring整合WebSocket</title>
      <link>https://zhyu-gao.github.io/post/java/spring%E6%95%B4%E5%90%88websocket/</link>
      <pubDate>Sat, 27 Mar 2021 14:22:51 +0800</pubDate>
      
      <guid>https://zhyu-gao.github.io/post/java/spring%E6%95%B4%E5%90%88websocket/</guid>
      
        <description>&lt;h3 id=&#34;spring整合websocket设置&#34;&gt;Spring整合websocket设置&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;Maven添加Jar包&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span class=&#34;c&#34;&gt;&amp;lt;!-- spring websocket --&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
	&lt;span class=&#34;nt&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework&lt;span class=&#34;nt&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
	&lt;span class=&#34;nt&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-websocket&lt;span class=&#34;nt&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
	&lt;span class=&#34;nt&#34;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;${spring.version}&lt;span class=&#34;nt&#34;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
	&lt;span class=&#34;nt&#34;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.springframework&lt;span class=&#34;nt&#34;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
	&lt;span class=&#34;nt&#34;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;spring-messaging&lt;span class=&#34;nt&#34;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
	&lt;span class=&#34;nt&#34;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;${spring.version}&lt;span class=&#34;nt&#34;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;span class=&#34;c&#34;&gt;&amp;lt;!-- websocket end --&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;Spring xml配置方式&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-xml&#34; data-lang=&#34;xml&#34;&gt;&lt;span class=&#34;c&#34;&gt;&amp;lt;!-- websocket 配置 --&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;websocket:message-broker&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;application-destination-prefix=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/app&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;websocket:stomp-endpoint&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;path=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/websocket&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;&amp;gt;&lt;/span&gt;
		&lt;span class=&#34;nt&#34;&gt;&amp;lt;websocket:sockjs&lt;/span&gt; &lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
	&lt;span class=&#34;nt&#34;&gt;&amp;lt;/websocket:stomp-endpoint&amp;gt;&lt;/span&gt;
	&lt;span class=&#34;nt&#34;&gt;&amp;lt;websocket:simple-broker&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;prefix=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;/topic&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
	&lt;span class=&#34;nt&#34;&gt;&amp;lt;websocket:client-inbound-channel&amp;gt;&lt;/span&gt;
		&lt;span class=&#34;nt&#34;&gt;&amp;lt;websocket:interceptors&amp;gt;&lt;/span&gt;
		&lt;span class=&#34;nt&#34;&gt;&amp;lt;bean&lt;/span&gt; &lt;span class=&#34;na&#34;&gt;class=&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;net.example.projects.web.WebSocketInterceptor&amp;#34;&lt;/span&gt;&lt;span class=&#34;nt&#34;&gt;/&amp;gt;&lt;/span&gt;
		&lt;span class=&#34;nt&#34;&gt;&amp;lt;/websocket:interceptors&amp;gt;&lt;/span&gt;
	&lt;span class=&#34;nt&#34;&gt;&amp;lt;/websocket:client-inbound-channel&amp;gt;&lt;/span&gt;
&lt;span class=&#34;nt&#34;&gt;&amp;lt;/websocket:message-broker&amp;gt;&lt;/span&gt;
&lt;span class=&#34;c&#34;&gt;&amp;lt;!-- websocket end --&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;此处启用stomp&lt;/p&gt;
&lt;p&gt;&lt;code&gt;STOMP&lt;/code&gt; 中文为: 面向消息的简单文本协议&lt;/p&gt;
&lt;p&gt;&lt;code&gt;websocket&lt;/code&gt;定义了两种传输信息类型:&lt;strong&gt;文本信息和二进制信息&lt;/strong&gt;。类型虽然被确定，但是他们的传输体是没有规定的。所以，需要用一种简单的文本传输类型来规定传输内容，它可以作为通讯中的文本传输协议。&lt;/p&gt;
&lt;p&gt;STOMP是基于帧的协议，客户端和服务器使用STOMP帧流通讯&lt;/p&gt;
&lt;p&gt;一个STOMP客户端是一个可以以两种模式运行的用户代理，可能是同时运行两种模式。&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;作为生产者，通过&lt;code&gt;SEND&lt;/code&gt;框架将消息发送给服务器的某个服务&lt;/li&gt;
&lt;li&gt;作为消费者，通过&lt;code&gt;SUBSCRIBE&lt;/code&gt;制定一个目标服务，通过&lt;code&gt;MESSAGE&lt;/code&gt;框架，从服务器接收消息。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;基于websocket的一层STOMP封装，让业务端只需关心数据本身，不需要太过关心文本协议。当然还是需要了解一些STOMP协议各个Frame的概念和应用场景。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;拦截器配置&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;WebSocketInterceptor&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;extends&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ChannelInterceptorAdapter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;

    &lt;span class=&#34;nd&#34;&gt;@Override&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;?&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;preSend&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;?&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MessageChannel&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;channel&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;StompHeaderAccessor&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;accessor&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;MessageHeaderAccessor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getAccessor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;StompHeaderAccessor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;class&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;c1&#34;&gt;//1、判断是否首次连接
&lt;/span&gt;&lt;span class=&#34;c1&#34;&gt;&lt;/span&gt;        &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;StompCommand&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;CONNECT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;equals&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accessor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getCommand&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()))&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;userId&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;accessor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getNativeHeader&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;userId&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;userId&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;Principal&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;principal&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;WebSocketManager&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;connect&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;name&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;accessor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;setUser&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;principal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
            &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;StompCommand&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;DISCONNECT&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;equals&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;accessor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getCommand&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()))&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;Principal&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;principal&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;accessor&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getUser&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
            &lt;span class=&#34;n&#34;&gt;WebSocketManager&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;disconnect&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;principal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getName&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;());&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;else&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
            
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;message&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;拦截处理连接和断开操作，Principal设置连接的用户，之后就可以发送消息到指定用户。&lt;/p&gt;
&lt;h3 id=&#34;常用command&#34;&gt;常用Command&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;CONNECT&lt;/li&gt;
&lt;li&gt;CONNECTED&lt;/li&gt;
&lt;li&gt;SEND&lt;/li&gt;
&lt;li&gt;SUBSRIBE&lt;/li&gt;
&lt;li&gt;UNSUBSRIBE&lt;/li&gt;
&lt;li&gt;BEGIN&lt;/li&gt;
&lt;li&gt;COMMIT&lt;/li&gt;
&lt;li&gt;ABORT&lt;/li&gt;
&lt;li&gt;ACK&lt;/li&gt;
&lt;li&gt;NACK&lt;/li&gt;
&lt;li&gt;DISCONNECT&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;消息&#34;&gt;消息&lt;/h3&gt;
&lt;p&gt;服务器可以通过&lt;code&gt;@MessageMapping&lt;/code&gt;方法处理请求&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SendToUser(&amp;quot;/topic/websocket&amp;quot;)&lt;/code&gt;发送消息&lt;/p&gt;
&lt;p&gt;需要强调的是web.xml中的路径匹配问题 写为&lt;!-- raw HTML omitted --&gt;/&lt;!-- raw HTML omitted --&gt;全部匹配的&lt;/p&gt;
&lt;p&gt;如果使用路径匹配&lt;!-- raw HTML omitted --&gt;/wsk/*&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;p&gt;spring中的地址不能写为&amp;lt;websocket:mapping path=&amp;quot;/wsk/echo&amp;quot; 只需要写为 &amp;lt;websocket:mapping path=&amp;quot;/echo&amp;quot;就可以了,不然无法访问,这个是很多人都会遇到的坑.需特别注意&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Somenote</title>
      <link>https://zhyu-gao.github.io/post/java/somenote/</link>
      <pubDate>Fri, 19 Feb 2021 10:28:35 +0800</pubDate>
      
      <guid>https://zhyu-gao.github.io/post/java/somenote/</guid>
      
        <description>&lt;h3 id=&#34;1-java中new-datelong-date&#34;&gt;1. Java中new Date(long date)&lt;/h3&gt;
&lt;p&gt;如果是10位时间戳,就是秒级别的转成date是有问题的,成格林尼治时间
需要用毫秒级的,就是13的时间戳才能得到正确的时间&lt;/p&gt;
&lt;h3 id=&#34;2-html中的disable&#34;&gt;2. html中的disable&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;html中的标签添加disable属性后不会将属性发送到后台,readonly可以,但是select标签是没有readonly属性,所以需要用其他方法解决.&lt;/p&gt;
&lt;/blockquote&gt;
</description>
      
    </item>
    
    <item>
      <title>Resume</title>
      <link>https://zhyu-gao.github.io/post/resume/</link>
      <pubDate>Tue, 28 Jul 2020 14:23:31 +0800</pubDate>
      
      <guid>https://zhyu-gao.github.io/post/resume/</guid>
      
        <description></description>
      
    </item>
    
    <item>
      <title>深入理解 JVM 之 垃圾回收机制</title>
      <link>https://zhyu-gao.github.io/post/java/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3-jvm-%E4%B9%8B-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/</link>
      <pubDate>Tue, 28 Apr 2020 13:28:19 +0800</pubDate>
      
      <guid>https://zhyu-gao.github.io/post/java/%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3-jvm-%E4%B9%8B-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6/</guid>
      
        <description>&lt;p&gt;转自 &lt;a href=&#34;https://juejin.im/post/5c73c7c96fb9a049dd80eedb&#34;&gt;https://juejin.im/post/5c73c7c96fb9a049dd80eedb&lt;/a&gt;&lt;/p&gt;
&lt;h1 id=&#34;深入理解-jvm-之-垃圾回收机制&#34;&gt;深入理解 JVM 之 垃圾回收机制&lt;/h1&gt;
&lt;p&gt;虽然内存的分配和回收技术已相当成熟，但如果需要排查内存溢出、内存泄露问题，或者要求高并发、高性能时，就需要对垃圾的回收进行监控和调节，以更好优化系统提高性能。&lt;/p&gt;
&lt;h2 id=&#34;对象存活判定&#34;&gt;对象存活判定&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;Java&lt;/code&gt; 内存结构中，程序计数器、虚拟机栈、本地方法栈等随着线程而生，随线程而灭，不需要考虑内存回收问题。而 &lt;code&gt;Java&lt;/code&gt; 堆和方法区则不同，它们的内存分配是动态的，只有在运行期间才能知道会创建哪些对象，垃圾回收关注的就是这两部分。&lt;/p&gt;
&lt;p&gt;垃圾回收首先需要判断哪些对象还存活着，主要有引用计数和可达性分析两种算法。&lt;/p&gt;
&lt;h3 id=&#34;引用计数算法&#34;&gt;引用计数算法&lt;/h3&gt;
&lt;p&gt;它的原理如下：给对象添加一个引用计数器，每当有一个地方引用它时，计时器值就加 &lt;code&gt;1&lt;/code&gt;；当引用失效时，计数器值就减 &lt;code&gt;1&lt;/code&gt;；如果计数器为 0，对象就不可能再被使用。&lt;/p&gt;
&lt;p&gt;引用计数算法虽然实现简单、判定效率较高。但它很难解决对象之间循环引用的问题。&lt;/p&gt;
&lt;p&gt;例如两个对象相互引用，实际上两个对象都不会再访问，但因为相互引用着对方，导致它们的计数器值都不为 &lt;code&gt;0&lt;/code&gt;，于是引用技术算法无法通过 &lt;code&gt;GC&lt;/code&gt; 收集器回收它们。&lt;/p&gt;
&lt;h3 id=&#34;可达性分析算法&#34;&gt;可达性分析算法&lt;/h3&gt;
&lt;p&gt;它的原理如下：通过一系列称为 &lt;code&gt;GC Roots&lt;/code&gt; 的对象作为起始点，从这些节点开始向下搜索，搜索所走过的路径称为引用链。当一个对象到 &lt;code&gt;GC Roots&lt;/code&gt; 没有任何引用链相连时，则证明对象是不可用的。&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Java&lt;/code&gt; 中，可作为 &lt;code&gt;GC Roots&lt;/code&gt; 的对象包括如下几种：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;虚拟机栈（栈帧中的本地变量表）中引用的对象；&lt;/li&gt;
&lt;li&gt;方法区中类静态属性引用的对象；&lt;/li&gt;
&lt;li&gt;方法区中常量引用的对象；&lt;/li&gt;
&lt;li&gt;本地方法栈中 &lt;code&gt;JNI&lt;/code&gt;( &lt;code&gt;Native&lt;/code&gt; 方法) 引用的对象。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;引用类型&#34;&gt;引用类型&lt;/h3&gt;
&lt;p&gt;可以看到，对象回收判定算法判断对象是否存活都与引用有关。从 &lt;code&gt;JDK1.2&lt;/code&gt; 开始，引用分为四种类型，用来实现不同的功能，它们的引用强度也依次递减。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;强引用（Strong Reference）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;平时使用的引用就是强引用。只要强引用还存在，该对象永远不会被回收。&lt;/p&gt;
&lt;p&gt;可以通过将对象设置为 &lt;code&gt;null&lt;/code&gt;，使其被回收。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;软引用（Soft Reference）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;用于描述一些还有用但并非必需的对象。当系统内存空间不足时，会回收这些软引用指向的对象。它通过 &lt;code&gt;SoftReference&lt;/code&gt; 类来实现软引用。&lt;/p&gt;
&lt;p&gt;可以用来实现高速缓存。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;弱引用（Weak Reference）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;用来描绘非必需对象。被弱引用指向的对象只能生存到下一次垃圾回收之前。只要垃圾收集器运行，弱引用指向的对象就会被回收。它通过 &lt;code&gt;WeakReference&lt;/code&gt; 类来实现弱引用。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;虚引用（Phantom Reference）&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;虚引用和没有引用没有任何区别。一个对象是否有虚引用，不会影响其生存时间，也无法通过虚引用获取对象实例。它通过 &lt;code&gt;PhantomReference&lt;/code&gt; 来实现虚引用。必须和引用队列 &lt;code&gt;ReferenceQueue&lt;/code&gt; 联合使用。&lt;/p&gt;
&lt;p&gt;为一个对象设置虚引用的唯一目的是该对象被垃圾收集器回收前会收到一条系统通知。&lt;/p&gt;
&lt;h3 id=&#34;回收方法区&#34;&gt;回收方法区&lt;/h3&gt;
&lt;p&gt;方法区，或者说 &lt;code&gt;HotSpot&lt;/code&gt; 虚拟机中的永久代，进行垃圾回收的效率一般比较低。回收主要包括两部分内容：废弃常量和无用的类。&lt;/p&gt;
&lt;p&gt;判断一个常量是否是废弃常量比较简单，与回收 &lt;code&gt;Java&lt;/code&gt; 堆中的对象类似。而判定一个类是否是无用的类需要满足三个条件：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;该类所有的实例都已经被回收；&lt;/li&gt;
&lt;li&gt;加载该类的 &lt;code&gt;ClassLoader&lt;/code&gt; 已经被回收；&lt;/li&gt;
&lt;li&gt;该类对象的 &lt;code&gt;java.lang.Class&lt;/code&gt; 对象没有在任何地方被引用，无法在任何地方通过反射访问该类的方法。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;垃圾收集算法&#34;&gt;垃圾收集算法&lt;/h2&gt;
&lt;h3 id=&#34;标记-清除算法mark-sweep&#34;&gt;标记-清除算法（Mark-Sweep）&lt;/h3&gt;
&lt;p&gt;标记-清除算法分为两个标记和清除阶段：首先标记出所有需要回收的对象，在标记完成后统一回收所有被标记的对象。标记过程也就是对象存活判定算法。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://zhyu-gao.github.io/images/java/jvm/%E4%B8%8B%E8%BD%BD.jpeg&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;它是最基础的收集算法，主要有两个缺点：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;效率问题：标记和清除两个过程的效率都不高。&lt;/li&gt;
&lt;li&gt;空间问题：标记清除之后会产生大量不连续的内存碎片，空间碎片太多可能会导致以后在程序运行过程中需要分配较大的对象时，无法找到足够的连续内存而不得不提前触发另一次垃圾收集动作。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;复制算法copying&#34;&gt;复制算法（Copying）&lt;/h3&gt;
&lt;p&gt;复制算法将可用内存分为大小相等的两块，每次只使用其中的一块。在一块内存用完后，将仍存活的对象赋值到另一块上面，再把已使用过的内存一次清理掉。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://zhyu-gao.github.io/images/java/jvm/%E4%B8%8B%E8%BD%BD1.jpeg&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;复制算法的优缺点如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;优点：每次对半个分区进行内存回收，内存分配时也不用考虑内存碎片等情况，实现简单，运行高效。&lt;/li&gt;
&lt;li&gt;缺点：可使用的内存缩小为一半，代价较大。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;标记-整理算法mark-compact&#34;&gt;标记-整理算法（Mark-compact）&lt;/h3&gt;
&lt;p&gt;标记-整理算法分为标记和整理两个阶段，标记阶段和“标记-清除算法”一样，但在整理阶段，不是直接对可回收对象进行清理，而是让所有存活的对象都向一端移动，然后直接清理掉端边界以外的内存。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://zhyu-gao.github.io/images/java/jvm/%E4%B8%8B%E8%BD%BD2.jpeg&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;p&gt;标记-整理算法的优缺点如下：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;避免了空间碎片，空间利用率较高。&lt;/li&gt;
&lt;li&gt;效率不高，标记和清除过程的效率较低。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;分代算法generational-collection&#34;&gt;分代算法（Generational Collection）&lt;/h3&gt;
&lt;p&gt;分代算法根据对象存活周期将内存划分为几块。一般是将 &lt;code&gt;Java&lt;/code&gt; 对分为新生代和老年代，根据各个年代的特点采用适当的收集算法。&lt;/p&gt;
&lt;p&gt;新生代中，每次垃圾收集时只有少量对象存活，选择复制算法；老年代中，对象存活率较高、没有额外空间进行分配，使用“标记-清理”或“标记-整理”算法。&lt;/p&gt;
&lt;p&gt;为了对不同生命周期的对象采用不同的回收算法，所以垃圾收集器都采用分代收集算法，将堆分为新生代和老年代。&lt;/p&gt;
&lt;p&gt;  &lt;img src=&#34;https://user-gold-cdn.xitu.io/2019/2/25/1692444b2c55f1f5?imageView2/0/w/1280/h/960/format/webp/ignore-error/1&#34; alt=&#34;img&#34;&gt;&lt;/p&gt;
&lt;h2 id=&#34;内存分配和回收策略&#34;&gt;内存分配和回收策略&lt;/h2&gt;
&lt;h3 id=&#34;新生代&#34;&gt;新生代&lt;/h3&gt;
&lt;p&gt;新生代主要用来存放新创建的对象，一般占堆 &lt;code&gt;1/3&lt;/code&gt; 的空间。由于很多对象生命周期很短，每次 &lt;code&gt;Minor GC&lt;/code&gt; 后只有少量对象存活，所以选用复制算法。&lt;/p&gt;
&lt;p&gt;新生代又被分为一块较大的 &lt;code&gt;Eden&lt;/code&gt; 区和两块较小的大小相等的 &lt;code&gt;Survivor&lt;/code&gt; 区，使用 &lt;code&gt;from&lt;/code&gt; 和 &lt;code&gt;to&lt;/code&gt;来分别指代两个 &lt;code&gt;Survivor&lt;/code&gt; 区。&lt;code&gt;HotSpot&lt;/code&gt; 虚拟机默认 &lt;code&gt;Eden&lt;/code&gt; 和两块 &lt;code&gt;Survivor&lt;/code&gt; 的大小比例为 &lt;code&gt;8:1:1&lt;/code&gt;。每次只会使用 &lt;code&gt;Eden&lt;/code&gt; 和其中一块 &lt;code&gt;Survivor&lt;/code&gt; 区为对象服务，所以总是有一块 &lt;code&gt;Survivor&lt;/code&gt;区是空闲的，新生代实际可用的内存空间也就为 &lt;code&gt;90%&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;通常，对象会分配在 &lt;code&gt;Eden&lt;/code&gt; 区中，当 &lt;code&gt;Eden&lt;/code&gt; 区无法在分配对象时，&lt;code&gt;JVM&lt;/code&gt; 便会触发一次 &lt;code&gt;Minor GC&lt;/code&gt;，将存活下来的对象复制到 &lt;code&gt;from&lt;/code&gt; 指向的 &lt;code&gt;Survivor&lt;/code&gt; 区中。&lt;/p&gt;
&lt;p&gt;当 &lt;code&gt;from&lt;/code&gt; 指向的 &lt;code&gt;Survivor&lt;/code&gt; 区也无法分配时，对 &lt;code&gt;Eden&lt;/code&gt; 和 &lt;code&gt;from&lt;/code&gt; 指向的 &lt;code&gt;Survivor&lt;/code&gt; 区执行 &lt;code&gt;Minor GC&lt;/code&gt;，将存活下来的对象复制到 &lt;code&gt;to&lt;/code&gt; 指向的 &lt;code&gt;Survivor&lt;/code&gt; 区中，然后交换 &lt;code&gt;from&lt;/code&gt; 和 &lt;code&gt;to&lt;/code&gt; 指针，使 &lt;code&gt;to&lt;/code&gt;指向的 &lt;code&gt;Survivor&lt;/code&gt; 区为空，以保证下次 &lt;code&gt;Minor GC&lt;/code&gt; 有复制的空闲空间。&lt;/p&gt;
&lt;h3 id=&#34;老年代&#34;&gt;老年代&lt;/h3&gt;
&lt;p&gt;老年代用于存放大对象，或年龄超过一定程度的对象。一般占据堆 &lt;code&gt;2/3&lt;/code&gt; 的空间。&lt;/p&gt;
&lt;p&gt;如果对象需要大量连续的内存空间，例如很长的字符串及数组，这些对象会直接分配在老年代，以避免在 &lt;code&gt;Eden&lt;/code&gt; 区及两个 &lt;code&gt;Survivor&lt;/code&gt; 区之间发生大量的内存复制。&lt;/p&gt;
&lt;p&gt;虚拟机为每个对象定义了一个对象年龄计数器，如果对象分配在 &lt;code&gt;Eden&lt;/code&gt; 区，在经过一次 &lt;code&gt;Minor GC&lt;/code&gt;后仍然存活，之后移动到 &lt;code&gt;Survivor&lt;/code&gt; 空间中，将其年龄设置为 &lt;code&gt;1&lt;/code&gt;。对象在 &lt;code&gt;Survivor&lt;/code&gt; 区中每经过一次 &lt;code&gt;Minor GC&lt;/code&gt;，年龄就增加一次，当它的年龄增加到一定程度（默认为 &lt;code&gt;15&lt;/code&gt;）时，也会被晋升到老年代中。&lt;/p&gt;
&lt;p&gt;如果在 &lt;code&gt;Survivor&lt;/code&gt; 区中相同年龄所有对象大小的总和大于 &lt;code&gt;Survivor&lt;/code&gt; 区的一半，年龄大于或等于该年龄的对象就可以直接进入老年代。&lt;/p&gt;
&lt;p&gt;老年代的对象一般都比较稳定，&lt;code&gt;Major GC&lt;/code&gt; 不会频繁执行。&lt;code&gt;Major GC&lt;/code&gt; 采用标记—清除算法：首先扫描一次所有老年代，标记出存活的对象，然后回收没有标记的对象。&lt;code&gt;MajorGC&lt;/code&gt; 的耗时较长，而且会产生内存碎片。&lt;/p&gt;
&lt;h3 id=&#34;三种清理方式&#34;&gt;三种清理方式&lt;/h3&gt;
&lt;p&gt;&lt;strong&gt;Minor GC(Young GC)&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;指发生在新生代的垃圾收集动作。当 &lt;code&gt;Eden&lt;/code&gt; 区没有足够的空间分配时，就会触发一次 &lt;code&gt;Minor GC&lt;/code&gt;。由于 &lt;code&gt;Java&lt;/code&gt; 对象大多生命周期较短，所以 &lt;code&gt;Minor GC&lt;/code&gt; 非常频繁，一般回收速度也比较快。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Major GC&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;指发生在老年代的垃圾收集动作，在进行 &lt;code&gt;Major GC&lt;/code&gt; 前，一般都会进行至少一次 &lt;code&gt;Minor GC&lt;/code&gt;。&lt;code&gt;Major GC&lt;/code&gt; 的速度一般会比 &lt;code&gt;Minor GC&lt;/code&gt; 慢 &lt;code&gt;10&lt;/code&gt; 倍以上。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;Full GC&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;指回收整个新生代和老年代的垃圾收集动作。成本较高，对系统性能产生影响。&lt;code&gt;FULL GC&lt;/code&gt; 的时候会 &lt;code&gt;STOP THE WORD&lt;/code&gt;。&lt;/p&gt;
&lt;p&gt;它的触发条件主要有：&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;在执行 &lt;code&gt;Minor GC&lt;/code&gt; 之前，如果老年代最大可用的连续空间小于历次晋升到老生代对象的平均大小，则触发一次 &lt;code&gt;Full GC&lt;/code&gt; 。&lt;/li&gt;
&lt;li&gt;大对象直接进入老年代，或从年轻代晋升上来的老对象，在老年代尝试分配内存，但老年代内存空间不够时。&lt;/li&gt;
&lt;li&gt;显式调用 &lt;code&gt;System.gc()&lt;/code&gt; 方法时。&lt;/li&gt;
&lt;/ul&gt;
</description>
      
    </item>
    
    <item>
      <title>Wsl</title>
      <link>https://zhyu-gao.github.io/post/os/wsl/</link>
      <pubDate>Tue, 28 Apr 2020 13:27:34 +0800</pubDate>
      
      <guid>https://zhyu-gao.github.io/post/os/wsl/</guid>
      
        <description>&lt;h2 id=&#34;创建启动脚本&#34;&gt;创建启动脚本&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;进入任意WSL发行版本中,创建并编辑文件: /etc/init.wsl&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-bash&#34; data-lang=&#34;bash&#34;&gt;&lt;span class=&#34;cp&#34;&gt;#! /bin/sh
&lt;/span&gt;&lt;span class=&#34;cp&#34;&gt;&lt;/span&gt;/etc/init.d/cron &lt;span class=&#34;nv&#34;&gt;$1&lt;/span&gt;
/etc/init.d/ssh &lt;span class=&#34;nv&#34;&gt;$1&lt;/span&gt;
/etc/init.d/supervisor &lt;span class=&#34;nv&#34;&gt;$1&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;里面调用我们希望启动的3个服务启动脚本,设置权限,所有者为root,然后通过&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;sudo /etc/init.wsl [start|stop|restart]&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;来启动我们的服务,在Windows中,开始-运行输入:&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;shell:startup&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;按照WSL使用的Linux发行版本启动脚本,如Ubuntu18.04,创建ubuntu18.04.vbs:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;Set ws = CreateObject(&amp;#34;Wscript.Shell&amp;#34;)
ws.run &amp;#34;wsl -d Ubuntu-18.04 -u root /etc/init.wsl start&amp;#34;, vbhide
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;如果不知道什么版本可以用 wsl -l  来查看.&lt;/p&gt;
&lt;p&gt;WSL中有很多其他服务,按需修改/etc/init.wsl就可以了.&lt;/p&gt;
</description>
      
    </item>
    
    <item>
      <title>Windows Scoop</title>
      <link>https://zhyu-gao.github.io/post/os/windows-scoop/</link>
      <pubDate>Tue, 28 Apr 2020 13:26:31 +0800</pubDate>
      
      <guid>https://zhyu-gao.github.io/post/os/windows-scoop/</guid>
      
        <description>&lt;h3 id=&#34;官网&#34;&gt;官网&lt;/h3&gt;
&lt;p&gt;&lt;a href=&#34;https://scoop.sh&#34;&gt;https://scoop.sh&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;安装&#34;&gt;安装&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;自定义scoop包安装路径运行下方三行代码&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;blockquote&gt;
&lt;p&gt;$env:SCOOP=&amp;lsquo;F:\scoop&amp;rsquo;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;blockquote&gt;
&lt;p&gt;&amp;ldquo;[environment]::setEnvironmentVariable(&amp;lsquo;SCOOP&amp;rsquo;,$env:SCOOP,&amp;lsquo;User&amp;rsquo;)&amp;rdquo;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;blockquote&gt;
&lt;p&gt;iex (new-object net.webclient).downloadstring(&amp;lsquo;&lt;a href=&#34;https://get.scoop.sh&#34;&gt;https://get.scoop.sh&lt;/a&gt;&amp;rsquo;)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;常用软件列表&#34;&gt;常用软件列表&lt;/h3&gt;
&lt;ol&gt;
&lt;li&gt;7zip：scoop install 7zip&lt;/li&gt;
&lt;li&gt;aria2引擎：scoop install aria2&lt;/li&gt;
&lt;li&gt;chrome：scoop install chrome&lt;/li&gt;
&lt;li&gt;firefox：scoop install firefox&lt;/li&gt;
&lt;li&gt;opera：scoop install opera&lt;/li&gt;
&lt;li&gt;vivaldi：scoop install vivaldi&lt;/li&gt;
&lt;li&gt;git：scoop install git&lt;/li&gt;
&lt;li&gt;python：scoop install python&lt;/li&gt;
&lt;li&gt;vscode：scoop install vscode&lt;/li&gt;
&lt;li&gt;sublime-text：scoop install sublime-text&lt;/li&gt;
&lt;li&gt;notepadplusplus：scoop install notepadplusplus&lt;/li&gt;
&lt;li&gt;telegram：scoop install telegram&lt;/li&gt;
&lt;li&gt;typora：scoop install typora&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&#34;bucket软件源&#34;&gt;Bucket软件源&lt;/h3&gt;
&lt;p&gt;由于scoop比较小众，软件相比chocolatey较少&lt;br&gt;
不过scoop有一个强大的bucket软件源策略，而且有社区来维护&lt;br&gt;
常用软件基本能够找到&lt;/p&gt;
&lt;p&gt;社区地址：&lt;br&gt;
&lt;a href=&#34;https://github.com/rasa/scoop-directory/blob/master/by-score.md&#34;&gt;https://github.com/rasa/scoop-directory/blob/master/by-score.md&lt;/a&gt;&lt;br&gt;
bucket语法：scoop bucket add [软件源名字(随意)] [源地址]&lt;/p&gt;
&lt;p&gt;bucket源推荐：&lt;/p&gt;
&lt;p&gt;官方：&lt;br&gt;
scoop bucket add main&lt;br&gt;
scoop bucket add extras&lt;br&gt;
scoop bucket add versions&lt;br&gt;
scoop bucket add nightlies&lt;br&gt;
scoop bucket add nirsoft&lt;br&gt;
scoop bucket add php&lt;br&gt;
scoop bucket add nerd-fonts&lt;br&gt;
scoop bucket add nonportable&lt;br&gt;
scoop bucket add java&lt;br&gt;
scoop bucket add games&lt;br&gt;
scoop bucket add jetbrains&lt;/p&gt;
&lt;p&gt;国内常用软件：&lt;br&gt;
微信、QQ、钉钉……&lt;br&gt;
scoop bucket add dorado &lt;a href=&#34;https://github.com/h404bi/dorado&#34;&gt;https://github.com/h404bi/dorado&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;小新Bucket：&lt;br&gt;
FSCapture、Shadowsocksrr、UninstallTool、Notepad3、Wechat……&lt;br&gt;
scoop bucket add dajiu &lt;a href=&#34;https://github.com/dajiiu/dajiu-scoop&#34;&gt;https://github.com/dajiiu/dajiu-scoop&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;其他：&lt;br&gt;
scoop bucket add dodorz &lt;a href=&#34;https://github.com/dodorz/scoop-bucket&#34;&gt;https://github.com/dodorz/scoop-bucket&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&#34;遇到的问题&#34;&gt;遇到的问题&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;在安装过程中如果意外终止是没办法继续安装的&lt;br&gt;
需要uninstall一下然后才能重新安装&lt;/p&gt;
&lt;/blockquote&gt;
</description>
      
    </item>
    
    <item>
      <title>Unity全面屏适配 IOS</title>
      <link>https://zhyu-gao.github.io/post/unity3d/unity%E5%85%A8%E9%9D%A2%E5%B1%8F%E9%80%82%E9%85%8D-ios/</link>
      <pubDate>Tue, 28 Apr 2020 13:24:45 +0800</pubDate>
      
      <guid>https://zhyu-gao.github.io/post/unity3d/unity%E5%85%A8%E9%9D%A2%E5%B1%8F%E9%80%82%E9%85%8D-ios/</guid>
      
        <description>&lt;h2 id=&#34;unity全面屏适配&#34;&gt;Unity全面屏适配&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;修改xcode方法&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-objective-c&#34; data-lang=&#34;objective-c&#34;&gt;&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;src&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;@&amp;#34;    _window         = [[UIWindow alloc] initWithFrame: [UIScreen mainScreen].bounds];&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;  

&lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dst&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;@&amp;#34;//    _window         = [[UIWindow alloc] initWithFrame: [UIScreen mainScreen].bounds];&lt;/span&gt;

  &lt;span class=&#34;n&#34;&gt;CGRect&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;winSize&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UIScreen&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;mainScreen&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;].&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;bounds&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;k&#34;&gt;if&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;winSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;width&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;/&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;winSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;height&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;2&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;winSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;size&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;width&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;64&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;winSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;origin&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;x&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;mi&#34;&gt;32&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
  &lt;span class=&#34;p&#34;&gt;}&lt;/span&gt; 
  &lt;span class=&#34;n&#34;&gt;_window&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;[[&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;UIWindow&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;alloc&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;]&lt;/span&gt; &lt;span class=&#34;nl&#34;&gt;initWithFrame&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;:&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;winSize&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;];&lt;/span&gt;

  &lt;span class=&#34;s&#34;&gt;&amp;#34;;&lt;/span&gt;
       &lt;span class=&#34;n&#34;&gt;string&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;unityAppControllerPath&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;path&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;/Classes/UnityAppController.mm&amp;#34;&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;;&lt;/span&gt;
       &lt;span class=&#34;n&#34;&gt;XClassExt&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;UnityAppController&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;XClassExt&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;unityAppControllerPath&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
       &lt;span class=&#34;n&#34;&gt;UnityAppController&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;Replace&lt;/span&gt; &lt;span class=&#34;p&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;src&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;dst&lt;/span&gt;&lt;span class=&#34;p&#34;&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;修改UGUI方法&lt;/li&gt;
&lt;/ul&gt;
</description>
      
    </item>
    
    <item>
      <title>Java面试题收集整理</title>
      <link>https://zhyu-gao.github.io/post/java/java%E9%9D%A2%E8%AF%95%E9%A2%98%E6%94%B6%E9%9B%86%E6%95%B4%E7%90%86/</link>
      <pubDate>Tue, 28 Apr 2020 13:09:33 +0800</pubDate>
      
      <guid>https://zhyu-gao.github.io/post/java/java%E9%9D%A2%E8%AF%95%E9%A2%98%E6%94%B6%E9%9B%86%E6%95%B4%E7%90%86/</guid>
      
        <description>&lt;h1 id=&#34;java相关知识点&#34;&gt;Java相关知识点&lt;/h1&gt;
&lt;h3 id=&#34;arraylist和vector的区别&#34;&gt;ArrayList和Vector的区别&lt;/h3&gt;
&lt;p&gt;&lt;img src=&#34;https://zhyu-gao.github.io/images/util.png&#34; alt=&#34;Util常用类&#34;&gt;&lt;/p&gt;
&lt;p&gt;这张图里的内容对我们学习Java来说，非常的重要，白色的部分是需要去了解的，黄色部分是我们要去重点了解的，不但要知道怎么去用，至少还需要读一次源码。绿色部分内容已经很少用了，但在面试题中有可能会问到，我们来看一个经常出现的面试题：&lt;strong&gt;ArrayList与Vector的区别是什么？&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;**首先我们给出标准答案：  **&lt;/p&gt;
&lt;p&gt;**1、Vector是线程安全的，ArrayList不是线程安全的。 **&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2、ArrayList在底层数组不够用时在原来的基础上扩展0.5倍，Vector是扩展1倍。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;看上图Vector和ArrayList一样，都继承自List，来看一下Vector的源码&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Vector&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;E&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;extends&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AbstractList&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;E&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;implements&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;List&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;E&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;RandomAccess&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Cloneable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;java&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;io&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;Serializable&lt;/span&gt;
&lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
    &lt;span class=&#34;cm&#34;&gt;/**
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;     * The array buffer into which the components of the vector are
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;     * stored. The capacity of the vector is the length of this array buffer,
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;     * and is at least large enough to contain all the vector&amp;#39;s elements.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;     *
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;     * &amp;lt;p&amp;gt;Any array elements following the last element in the Vector are null.
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;     *
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;     * @serial
&lt;/span&gt;&lt;span class=&#34;cm&#34;&gt;     */&lt;/span&gt;
    &lt;span class=&#34;kd&#34;&gt;protected&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Object&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;elementData&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;

&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;实现了List接口，底层和ArrayList一样，都是数组来实现的。分别看一下这两个类的add方法，首先来看ArrayList的add源码&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;/**
     * Appends the specified element to the end of this list.
     *
     * @param e element to be appended to this list
     * @return &amp;lt;tt&amp;gt;true&amp;lt;/tt&amp;gt; (as specified by {@link Collection#add})
     */
    public boolean add(E e) {
        ensureCapacityInternal(size + 1);  // Increments modCount!!检查是否需要扩容
        elementData[size++] = e; //给元素赋值
        return true;
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;再看Vector的add源码&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;/**
     * Appends the specified element to the end of this Vector.
     *
     * @param e element to be appended to this Vector
     * @return {@code true} (as specified by {@link Collection#add})
     * @since 1.2
     */
    public synchronized boolean add(E e) { //加了一个synchronized关键字
        modCount++;
        ensureCapacityHelper(elementCount + 1); //检查是否需要扩容
        elementData[elementCount++] = e; //给元素赋值
        return true;
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;方法实现都一样，就是加了一个synchronized的关键字，remove方法也是一样。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;只要是关键性的操作，方法前面都加了synchronized关键字，来保证线程的安全性&lt;/strong&gt;。当执行synchronized修饰的方法前，系统会对该方法加一把锁，方法执行完成后释放锁，**加锁和释放锁的这个过程，在系统中是有开销的，因此，**在单线程的环境中，Vector效率要差很多。（多线程环境不允许用ArrayList，需要做处理）。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;和ArrayList和Vector一样，同样的类似关系的类还有HashMap和HashTable，StringBuilder和StringBuffer，后者是前者线程安全版本的实现。&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&#34;hashmap原理及实现学习总结&#34;&gt;HashMap原理及实现学习总结&lt;/h3&gt;
&lt;h4 id=&#34;一-hashmap的工作原理&#34;&gt;一. HashMap的工作原理&lt;/h4&gt;
&lt;p&gt;HashMap基于hashing原理，我们通过put()和get()方法储存和获取对象。当我们将键值对传递给put()方法时，它调用键对象的hashCode()方法来计算hashcode，让后找到bucket位置来储存值对象。当获取对象时，通过键对象的equals()方法找到正确的键值对，然后返回值对象。HashMap使用LinkedList来解决碰撞问题，当发生碰撞了，对象将会储存在LinkedList的下一个节点中。 HashMap在每个LinkedList节点中储存键值对对象。 
当两个不同的键对象的hashcode相同时会发生什么？ 它们会储存在同一个bucket位置的LinkedList中。键对象的equals()方法用来找到键值对。&lt;/p&gt;
&lt;h4 id=&#34;二hashmap的定义&#34;&gt;二.HashMap的定义&lt;/h4&gt;
&lt;p&gt;HashMap实现了Map接口，继承AbstractMap。其中Map接口定义了键映射到值的规则，而AbstractMap类提供 Map 接口的骨干实现，以最大限度地减少实现此接口所需的工作！&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;HashMap&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;K&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;  
    &lt;span class=&#34;kd&#34;&gt;extends&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;AbstractMap&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;K&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt;  
    &lt;span class=&#34;kd&#34;&gt;implements&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Map&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;K&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;V&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Cloneable&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Serializable&lt;/span&gt;  
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;h4 id=&#34;三hashmap的数据结构&#34;&gt;三.HashMap的数据结构&lt;/h4&gt;
&lt;p&gt;HashMap的底层主要是基于数组和链表来实现的，它之所以有相当快的查询速度主要是因为它是通过计算散列码来决定存储的位置。HashMap中主要是通过key的hashCode来计算hash值的，只要hashCode相同，计算出来的hash值就一样。如果存储的对象对多了，就有可能不同的对象所算出来的hash值是相同的，这就出现了所谓的hash冲突。学过数据结构的同学都知道，解决hash冲突的方法有很多，HashMap底层是通过链表来解决hash冲突的。&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://zhyu-gao.github.io/images/java/hashmap.jpg&#34; alt=&#34;hash&#34;&gt;&lt;/p&gt;
&lt;p&gt;紫色部分即代表哈希表，也称为哈希数组，数组的每个元素都是一个单链表的头节点，链表是用来解决冲突的，如果不同的key映射到了数组的同一位置处，就将其放入单链表中。&lt;/p&gt;
&lt;h4 id=&#34;四hashmap的构造函数&#34;&gt;四.HashMap的构造函数&lt;/h4&gt;
&lt;p&gt;在这里提到了两个参数：初始容量，加载因子。这两个参数是影响HashMap性能的重要参数，其中容量表示哈希表中桶的数量，初始容量是创建哈希表时的容量，加载因子是哈希表在其容量自动增加之前可以达到多满的一种尺度，它衡量的是一个散列表的空间的使用程度，负载因子越大表示散列表的装填程度越高，反之愈小。对于使用链表法的散列表来说，查找一个元素的平均时间是O(1+a)，因此如果负载因子越大，对空间的利用更充分，然而后果是查找效率的降低；如果负载因子太小，那么散列表的数据将过于稀疏，对空间造成严重浪费。系统默认负载因子为0.75，一般情况下我们是无需修改的。当哈希表中的条目数超出了加载因子与当前容量的乘积时，通过调用 rehash 方法将容量翻倍。&lt;/p&gt;
&lt;h4 id=&#34;五hashmap的存储实现&#34;&gt;五.HashMap的存储实现&lt;/h4&gt;
&lt;p&gt;HashMap中我们最长用的就是put(K, V)和get(K)。我们都知道，HashMap的K值是唯一的，那如何保证唯一性呢？我们首先想到的是用equals比较，没错，这样可以实现，但随着内部元素的增多，put和get的效率将越来越低，这里的时间复杂度是O(n)，假如有1000个元素，put时需要比较1000次。实际上，HashMap很少会用到equals方法，因为其内通过一个哈希表管理所有元素，哈希是通过hash单词音译过来的，也可以称为散列表，哈希算法可以快速的存取元素，当我们调用put存值时，HashMap首先会调用K的hashCode方法，获取哈希码，通过哈希码快速找到某个存放位置，这个位置可以被称之为bucketIndex，通过上面所述hashCode的协定可以知道，如果hashCode不同，equals一定为false，如果hashCode相同，equals不一定为true。所以理论上，hashCode可能存在冲突的情况，有个专业名词叫碰撞，当碰撞发生时，计算出的bucketIndex也是相同的，这时会取到bucketIndex位置已存储的元素，最终通过equals来比较，equals方法就是哈希码碰撞时才会执行的方法，所以前面说HashMap很少会用到equals。HashMap通过hashCode和equals最终判断出K是否已存在，如果已存在，则使用新V值替换旧V值，并返回旧V值，如果不存在 ，则存放新的键值对到bucketIndex位置。整个put过程的流程图如下：&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://zhyu-gao.github.io/images/java/hashmap1.jpg&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;相关源码如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;// 在此映射中关联指定值与指定键。如果该映射以前包含了一个该键的映射关系，则旧值被替换
    public V put(K key, V value) {
        // 当key为null，调用putForNullKey方法，保存null与table第一个位置中，这是HashMap允许为null的原因 
        if (key == null)
            return putForNullKey(value);
        // 使用hash函数预处理hashCode，计算key的hash值  
        int hash = hash(key.hashCode());//-------（1）
        // 计算key hash 值在 table 数组中的位置 
        int i = indexFor(hash, table.length);//------(2)
        // 从i出开始迭代 e,找到 key 保存的位置
        for (Entry&amp;lt;K, V&amp;gt; e = table[i]; e != null; e = e.next) {
            Object k;
            // 判断该条链上是否有hash值相同的(key相同) 
            // 若存在相同，则直接覆盖value，返回旧value 
            if (e.hash == hash &amp;amp;&amp;amp; ((k = e.key) == key || key.equals(k))) {
                // 旧值 = 新值  
                V oldValue = e.value;
                // 将要存储的value存进去
                e.value = value;
                e.recordAccess(this);
                // 返回旧的value
                return oldValue;
            }
        }
        // 修改次数增加1 
        modCount++;
        // 将key、value添加至i位置处 
        addEntry(hash, key, value, i);
        return null;
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;通过源码我们可以清晰看到HashMap保存数据的过程为：首先判断key是否为null，若为null，则直接调用putForNullKey方法。若不为空则先计算key的hash值，然后根据hash值搜索在table数组中的索引位置，如果table数组在该位置处有元素，则通过比较是否存在相同的key，若存在则覆盖原来key的value，否则将该元素保存在链头（最先保存的元素放在链尾）。若table在该处没有元素，则直接保存。这个过程看似比较简单，其实深有内幕。有如下几点： 
1、 先看迭代处。此处迭代原因就是为了防止存在相同的key值，若发现两个hash值（key）相同时，HashMap的处理方式是用新value替换旧value，这里并没有处理key，这就解释了HashMap中没有两个相同的key。 
2、 在看（1）、（2）处。这里是HashMap的精华所在。首先是hash方法，该方法为一个纯粹的数学计算，就是计算h的hash值。&lt;/p&gt;
&lt;p&gt;HashMap的底层数组长度总是2的n次方，在构造函数中存在：capacity &amp;laquo;= 1;这样做总是能够保证HashMap的底层数组长度为2的n次方。当length为2的n次方时，h&amp;amp;(length - 1)就相当于对length取模，而且速度比直接取模快得多，这是HashMap在速度上的一个优化。 
这里再来复习put的流程：当我们想一个HashMap中添加一对key-value时，系统首先会计算key的hash值，然后根据hash值确认在table中存储的位置。若该位置没有元素，则直接插入。否则迭代该处元素链表并依此比较其key的hash值。如果两个hash值相等且key值相等(e.hash == hash &amp;amp;&amp;amp; ((k = e.key) == key || key.equals(k))),则用新的Entry的value覆盖原来节点的value。如果两个hash值相等但key值不等 ，则将该节点插入该链表的链头。具体的实现过程见addEntry方法，如下：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;// 添加一个新的桶来保存该key和value
    void addEntry(int hash, K key, V value, int bucketIndex) {
        // 获取bucketIndex处的Entry 
        Entry&amp;lt;K, V&amp;gt; e = table[bucketIndex];
        // 将新创建的 Entry 放入 bucketIndex 索引处，并让新的 Entry 指向原来的 Entry  
        table[bucketIndex] = new Entry&amp;lt;K, V&amp;gt;(hash, key, value, e);
        // 若HashMap中元素的个数超过极限了，则容量扩大两倍 
        if (size++ &amp;gt;= threshold)
            // 调整容量
            resize(2 * table.length);
    }
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;这个方法中有两点需要注意： 
一是链的产生：系统总是将新的Entry对象添加到bucketIndex处。如果bucketIndex处已经有了对象，那么新添加的Entry对象将指向原有的Entry对象，形成一条Entry链，但是若bucketIndex处没有Entry对象，也就是e==null,那么新添加的Entry对象指向null，也就不会产生Entry链了。 
二是扩容问题：随着HashMap中元素的数量越来越多，发生碰撞的概率就越来越大，所产生的链表长度就会越来越长，这样势必会影响HashMap的速度，为了保证HashMap的效率，系统必须要在某个临界点进行扩容处理。该临界点在当HashMap中元素的数量等于table数组长度*加载因子。但是扩容是一个非常耗时的过程，因为它需要重新计算这些数据在新table数组中的位置并进行复制处理。所以如果我们已经预知HashMap中元素的个数，那么预设元素的个数能够有效的提高HashMap的性能。&lt;/p&gt;
&lt;h4 id=&#34;六和其他map比较&#34;&gt;六.和其他Map比较&lt;/h4&gt;
&lt;h6 id=&#34;hashmapconcurrenthashmaphashtable的区别&#34;&gt;HashMap、ConcurrentHashMap、HashTable的区别&lt;/h6&gt;
&lt;p&gt;引入&lt;code&gt;ConcurrentHashMap&lt;/code&gt;是为了在同步集合HashTable之间有更好的选择，&lt;code&gt;HashTable&lt;/code&gt;与&lt;code&gt;HashMap&lt;/code&gt;、&lt;code&gt;ConcurrentHashMap&lt;/code&gt;主要的区别在于HashMap不是同步的、线程不安全的和不适合应用于多线程并发环境下，而&lt;code&gt;ConcurrentHashMap&lt;/code&gt;是线程安全的集合容器，特别是在多线程和并发环境中，通常作为&lt;code&gt;Map&lt;/code&gt;的主要实现。除了线程安全外，他们之间还有一些细微的不同，本文会介绍到。顺便说说，&lt;code&gt;HashMap&lt;/code&gt;和&lt;code&gt;ConcurrentHashMap&lt;/code&gt;还有&lt;code&gt;ConcurrentHashMap&lt;/code&gt;和&lt;code&gt;Hashtable&lt;/code&gt;两者之间的区别在Java面试中经常出现，特别是高级Java程序员。&lt;/p&gt;
&lt;h6 id=&#34;hashmap与concurrenthashmap的区别&#34;&gt;HashMap与ConcurrentHashMap的区别&lt;/h6&gt;
&lt;p&gt;在这部分，我们会看到更多关于&lt;code&gt;HashMap&lt;/code&gt;和&lt;code&gt;ConcurrentHashMap&lt;/code&gt;的细节和对比它们之间的参数比如线程安全、同步、性能和基本的使用。&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;
&lt;p&gt;就像上面所说他们之间的第一个重要的区别就是&lt;code&gt;ConcurrentHashMap&lt;/code&gt;是线程安全的和在并发环境下不需要加额外的同步。虽然它不像&lt;code&gt;Hashtable&lt;/code&gt;那样需要同样的同步等级(全表锁)，但也有很多实际的用途。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;你可以使用&lt;code&gt;Collections.synchronizedMap(HashMap)&lt;/code&gt;来包装HashMap作为同步容器，这时它的作用几乎与&lt;code&gt;Hashtable&lt;/code&gt;一样,当每次对&lt;code&gt;Map&lt;/code&gt;做修改操作的时候都会锁住这个&lt;code&gt;Map&lt;/code&gt;对象，而&lt;code&gt;ConcurrentHashMap&lt;/code&gt;会基于并发的等级来划分整个Map来达到线程安全，它只会锁操作的那一段数据而不是整个&lt;code&gt;Map&lt;/code&gt;都上锁。&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;&lt;code&gt;ConcurrentHashMap&lt;/code&gt;有很好的扩展性，在多线程环境下性能方面比做了同步的&lt;code&gt;HashMap&lt;/code&gt;要好，但是在单线程环境下，&lt;code&gt;HashMap&lt;/code&gt;会比&lt;code&gt;ConcurrentHashMap&lt;/code&gt;好一点。&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h6 id=&#34;concurrenthashmap-vs-hashtable-vs-synchronized-map&#34;&gt;ConcurrentHashMap vs Hashtable vs Synchronized Map&lt;/h6&gt;
&lt;p&gt;虽然三个集合类在多线程并发应用中都是线程安全的，但是他们有一个重大的差别，就是他们各自实现线程安全的方式。&lt;code&gt;Hashtable&lt;/code&gt;是jdk1的一个遗弃的类，它把所有方法都加上&lt;code&gt;synchronized&lt;/code&gt;关键字来实现线程安全。所有的方法都同步这样造成多个线程访问效率特别低。&lt;code&gt;Synchronized Map&lt;/code&gt;与&lt;code&gt;HashTable&lt;/code&gt;差别不大，也是在并发中作类似的操作，两者的唯一区别就是&lt;code&gt;Synchronized Map&lt;/code&gt;没被遗弃，它可以通过使用&lt;code&gt;Collections.synchronizedMap()&lt;/code&gt;来包装&lt;code&gt;Map&lt;/code&gt;作为同步容器使用。&lt;/p&gt;
&lt;p&gt;另一方面，&lt;code&gt;ConcurrentHashMap&lt;/code&gt;的设计有点特别，表现在多个线程操作上。它不用做外的同步的情况下默认同时允许16个线程读和写这个Map容器。因为其内部的实现剥夺了锁，使它有很好的扩展性。不像&lt;code&gt;HashTable&lt;/code&gt;和&lt;code&gt;Synchronized Map&lt;/code&gt;，&lt;code&gt;ConcurrentHashMap&lt;/code&gt;不需要锁整个Map，相反它划分了多个段(segments)，要操作哪一段才上锁那段数据。&lt;/p&gt;
&lt;p&gt;坦白说，集合类是一个最重要的Java API，我觉得恰当的使用它们是一种艺术。依我个人经验，我会使用&lt;code&gt;ArrayList&lt;/code&gt;这些容器来提高自己的Java程序的性能，而不会去用一些遗弃的容器比如&lt;code&gt;Vector&lt;/code&gt;等等，在Java 5之前，Java集合容器有一个很致命的缺陷就是缺乏可扩展性。
同步集合类比如&lt;code&gt;Hashtable&lt;/code&gt;和&lt;code&gt;Vector&lt;/code&gt;在多线程Java应用里面逐渐成为障碍物；在jdk5后出现一些很好的并发集合，对大容量、低延迟的电子交易系统有很大影响，是快速存取数据的支柱。&lt;/p&gt;
&lt;h3 id=&#34;正确理解thread-local的原理与适用场景&#34;&gt;正确理解Thread Local的原理与适用场景&lt;/h3&gt;
&lt;h4 id=&#34;threadlocal解决什么问题&#34;&gt;ThreadLocal解决什么问题&lt;/h4&gt;
&lt;p&gt;由于 ThreadLocal 支持范型，如 ThreadLocal&amp;lt; StringBuilder &amp;gt;，为表述方便，后文用 &lt;strong&gt;变量&lt;/strong&gt; 代表 ThreadLocal 本身，而用 &lt;strong&gt;实例&lt;/strong&gt; 代表具体类型（如 StringBuidler ）的实例。&lt;/p&gt;
&lt;h5 id=&#34;不恰当的理解&#34;&gt;不恰当的理解&lt;/h5&gt;
&lt;p&gt;下面是常见的对于 ThreadLocal的介绍&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ThreadLocal为解决多线程程序的并发问题提供了一种新的思路
ThreadLocal的目的是为了解决多线程访问资源时的共享问题&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;还有很多文章在对比 ThreadLocal 与 synchronize 的异同。既然是作比较，那应该是认为这两者解决相同或类似的问题。&lt;/p&gt;
&lt;p&gt;上面的描述，问题在于，ThreadLocal 并不解决多线程 &lt;strong&gt;共享&lt;/strong&gt; 变量的问题。既然变量不共享，那就更谈不上同步的问题。&lt;/p&gt;
&lt;h5 id=&#34;合理的理解&#34;&gt;合理的理解&lt;/h5&gt;
&lt;p&gt;ThreadLocal变量，它的基本原理是，同一个 ThreadLocal 所包含的对象（对ThreadLocal&amp;lt; String &amp;gt;而言即为 String 类型变量），在不同的 Thread 中有不同的副本（实际是不同的实例，后文会详细阐述）。这里有几点需要注意&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;因为每个 Thread 内有自己的实例副本，且该副本只能由当前 Thread 使用。这是也是 ThreadLocal 命名的由来&lt;/li&gt;
&lt;li&gt;既然每个 Thread 有自己的实例副本，且其它 Thread 不可访问，那就不存在多线程间共享的问题&lt;/li&gt;
&lt;li&gt;既无共享，何来同步问题，又何来解决同步问题一说？&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;那 ThreadLocal 到底解决了什么问题，又适用于什么样的场景？&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;This class provides thread-local variables. These variables differ from their normal counterparts in that each thread that accesses one (via its get or set method) has its own, independently initialized copy of the variable. ThreadLocal instances are typically private static fields in classes that wish to associate state with a thread (e.g., a user ID or Transaction ID).
Each thread holds an implicit reference to its copy of a thread-local variable as long as the thread is alive and the ThreadLocal instance is accessible; after a thread goes away, all of its copies of thread-local instances are subject to garbage collection (unless other references to these copies exist).&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;ThreadLocal 提供了线程本地的实例。它与普通变量的区别在于，每个使用该变量的线程都会初始化一个完全独立的实例副本。ThreadLocal 变量通常被&lt;code&gt;private static&lt;/code&gt;修饰。当一个线程结束时，它所使用的所有 ThreadLocal 相对的实例副本都可被回收。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;总的来说，**ThreadLocal 适用于每个线程需要自己独立的实例且该实例需要在多个方法中被使用，也即变量在线程间隔离而在方法或类间共享的场景。**后文会通过实例详细阐述该观点。另外，该场景下，并非必须使用 ThreadLocal ，其它方式完全可以实现同样的效果，只是 ThreadLocal 使得实现更简洁。&lt;/p&gt;
&lt;h4 id=&#34;threadlocal用法&#34;&gt;ThreadLocal用法&lt;/h4&gt;
&lt;p&gt;下面通过如下代码说明 ThreadLocal 的使用方式&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;16
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;17
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;18
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;19
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;20
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;21
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;22
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;23
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;24
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;25
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;26
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;27
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;28
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;29
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;30
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;31
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;32
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;33
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;34
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;35
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;36
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;37
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;38
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;39
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;40
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;41
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;42
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;43
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;44
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;45
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;46
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;47
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;48
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;49
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;50
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;51
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;52
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;53
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;54
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;55
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;56
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;57
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;58
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-java&#34; data-lang=&#34;java&#34;&gt;&lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;ThreadLocalDemo&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;

  &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;main&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;[]&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;args&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;throws&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;InterruptedException&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;

    &lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;threads&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;3&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;CountDownLatch&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;countDownLatch&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;CountDownLatch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;threads&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;InnerClass&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;innerClass&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;InnerClass&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;1&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;threads&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Thread&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;-&amp;gt;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;for&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;kt&#34;&gt;int&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;0&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;4&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;++)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;innerClass&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;valueOf&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;j&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;));&lt;/span&gt;
          &lt;span class=&#34;n&#34;&gt;innerClass&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
        &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;innerClass&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;hello world&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;);&lt;/span&gt;
        &lt;span class=&#34;n&#34;&gt;countDownLatch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;countDown&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;},&lt;/span&gt; &lt;span class=&#34;s&#34;&gt;&amp;#34;thread - &amp;#34;&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;+&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;i&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;).&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;start&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;n&#34;&gt;countDownLatch&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;await&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;

  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;InnerClass&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;add&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;newStr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;StringBuilder&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;str&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;Counter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;counter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;Counter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;counter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;str&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;append&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;newStr&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;));&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;print&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;System&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;out&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Thread name:%s , ThreadLocal hashcode:%s, Instance hashcode:%s, Value:%s\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;Thread&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;currentThread&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getName&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(),&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;Counter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;counter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;hashCode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(),&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;Counter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;counter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;hashCode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(),&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;Counter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;counter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;toString&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;public&lt;/span&gt; &lt;span class=&#34;kt&#34;&gt;void&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;String&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;words&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;)&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;Counter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;counter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;set&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;StringBuilder&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;words&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;));&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;System&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;out&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;printf&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(&lt;/span&gt;&lt;span class=&#34;s&#34;&gt;&amp;#34;Set, Thread name:%s , ThreadLocal hashcode:%s,  Instance hashcode:%s, Value:%s\n&amp;#34;&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;,&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;Thread&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;currentThread&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;getName&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(),&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;Counter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;counter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;hashCode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(),&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;Counter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;counter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;hashCode&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;(),&lt;/span&gt;
      &lt;span class=&#34;n&#34;&gt;Counter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;counter&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;.&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;get&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;().&lt;/span&gt;&lt;span class=&#34;na&#34;&gt;toString&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;());&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

  &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;class&lt;/span&gt; &lt;span class=&#34;nc&#34;&gt;Counter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;

    &lt;span class=&#34;kd&#34;&gt;private&lt;/span&gt; &lt;span class=&#34;kd&#34;&gt;static&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ThreadLocal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;StringBuilder&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;counter&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;=&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;ThreadLocal&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;lt;&lt;/span&gt;&lt;span class=&#34;n&#34;&gt;StringBuilder&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;&amp;gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
      &lt;span class=&#34;nd&#34;&gt;@Override&lt;/span&gt;
      &lt;span class=&#34;kd&#34;&gt;protected&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;StringBuilder&lt;/span&gt; &lt;span class=&#34;nf&#34;&gt;initialValue&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;()&lt;/span&gt; &lt;span class=&#34;o&#34;&gt;{&lt;/span&gt;
        &lt;span class=&#34;k&#34;&gt;return&lt;/span&gt; &lt;span class=&#34;k&#34;&gt;new&lt;/span&gt; &lt;span class=&#34;n&#34;&gt;StringBuilder&lt;/span&gt;&lt;span class=&#34;o&#34;&gt;();&lt;/span&gt;
      &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
    &lt;span class=&#34;o&#34;&gt;};&lt;/span&gt;

  &lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;

&lt;span class=&#34;o&#34;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;上述代码执行结果如下&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;11
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;12
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;13
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;14
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;15
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;Thread name:thread - 1 , ThreadLocal hashcode:372282300, Instance hashcode:418873098, Value:0
Thread name:thread - 3 , ThreadLocal hashcode:372282300, Instance hashcode:1609588821, Value:0
Thread name:thread - 2 , ThreadLocal hashcode:372282300, Instance hashcode:1780437710, Value:0
Thread name:thread - 3 , ThreadLocal hashcode:372282300, Instance hashcode:1609588821, Value:01
Thread name:thread - 1 , ThreadLocal hashcode:372282300, Instance hashcode:418873098, Value:01
Thread name:thread - 3 , ThreadLocal hashcode:372282300, Instance hashcode:1609588821, Value:012
Thread name:thread - 3 , ThreadLocal hashcode:372282300, Instance hashcode:1609588821, Value:0123
Set, Thread name:thread - 3 , ThreadLocal hashcode:372282300,  Instance hashcode:1362597339, Value:hello world
Thread name:thread - 2 , ThreadLocal hashcode:372282300, Instance hashcode:1780437710, Value:01
Thread name:thread - 1 , ThreadLocal hashcode:372282300, Instance hashcode:418873098, Value:012
Thread name:thread - 2 , ThreadLocal hashcode:372282300, Instance hashcode:1780437710, Value:012
Thread name:thread - 1 , ThreadLocal hashcode:372282300, Instance hashcode:418873098, Value:0123
Thread name:thread - 2 , ThreadLocal hashcode:372282300, Instance hashcode:1780437710, Value:0123
Set, Thread name:thread - 1 , ThreadLocal hashcode:372282300,  Instance hashcode:482932940, Value:hello world
Set, Thread name:thread - 2 , ThreadLocal hashcode:372282300,  Instance hashcode:1691922941, Value:hello world
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;从上面的输出可看出&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;从第1-3行输出可见，每个线程通过 ThreadLocal 的 get() 方法拿到的是不同的 StringBuilder 实例&lt;/li&gt;
&lt;li&gt;第1-3行输出表明，每个线程所访问到的是同一个 ThreadLocal 变量&lt;/li&gt;
&lt;li&gt;从7、12、13行输出以及第30行代码可见，虽然从代码上都是对 Counter 类的静态 counter 字段进行 get() 得到 StringBuilder 实例并追加字符串，但是这并不会将所有线程追加的字符串都放进同一个 StringBuilder 中，而是每个线程将字符串追加进各自的 StringBuidler 实例内&lt;/li&gt;
&lt;li&gt;对比第1行与第15行输出并结合第38行代码可知，使用 set(T t) 方法后，ThreadLocal 变量所指向的 StringBuilder 实例被替换&lt;/li&gt;
&lt;/ul&gt;
</description>
      
    </item>
    
    <item>
      <title>Github</title>
      <link>https://zhyu-gao.github.io/post/git/github/</link>
      <pubDate>Tue, 28 Apr 2020 13:06:28 +0800</pubDate>
      
      <guid>https://zhyu-gao.github.io/post/git/github/</guid>
      
        <description>&lt;h2 id=&#34;github-clone-加速&#34;&gt;github Clone 加速&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;git config &amp;ndash;global http.postBuffer 524288000&lt;br&gt;
postBuffer(智能HTTP传输所使用的缓冲区)&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;修改git代理&#34;&gt;修改git代理&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;8
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;git config --global http.proxy &amp;#39;http://127.0.0.1:1080&amp;#39;

git config --global https.proxy &amp;#39;http://127.0.0.1:1080&amp;#39; 
 
# 只对github.com代理
git config --global http.https://github.com.proxy socks5://127.0.0.1:1080
# 取消代理
git config --global --unset http.https://github.com.proxy
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;只修改github的代理,不影响其他仓库&lt;/p&gt;
&lt;h3 id=&#34;取消代理&#34;&gt;取消代理&lt;/h3&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;git config --global --unset http.proxy
git config --global --unset https.proxy
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
      
    </item>
    
    <item>
      <title>Git Subtree</title>
      <link>https://zhyu-gao.github.io/post/git/git-subtree/</link>
      <pubDate>Tue, 28 Apr 2020 11:17:06 +0800</pubDate>
      
      <guid>https://zhyu-gao.github.io/post/git/git-subtree/</guid>
      
        <description>&lt;h2 id=&#34;用-git-subtree-在多个-git-项目间双向同步子项目附简明使用手册&#34;&gt;用 Git Subtree 在多个 Git 项目间双向同步子项目，附简明使用手册&lt;/h2&gt;
&lt;p&gt;转自&lt;a href=&#34;https://tech.youzan.com/git-subtree/&#34;&gt;https://tech.youzan.com/git-subtree/&lt;/a&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;什么时候需要 Subtree ？&lt;br&gt;
1、当多个项目共用同一坨代码，而这坨代码跟着项目在快速更新的时候&lt;br&gt;
2、把一部分代码迁移出去独立为一个新的 git 仓库，但又希望能够保留这部分代码的历史提交记录。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;背景&#34;&gt;背景&lt;/h2&gt;
&lt;p&gt;有赞微商城曾经是一个很大的前后端代码都包含在里面的 Git 项目，为了方便管理我们把前后端代码分离成2个 Git 仓库，进而再作分项目拆分成多个Git 仓库。&lt;/p&gt;
&lt;p&gt;于是，就需要有好的方式同步各个项目共用的Css库、JS库、PHP库（他们都是以独立的 Git 仓库的形式存在）。而且由于开发节奏极快，我们需要这些库是&lt;strong&gt;可以在不同项目间双向同步的而不是单向同步&lt;/strong&gt;。&lt;strong&gt;而且，最好能做到被迁移的这部分代码在新的git仓库里保留原有的历史提交记录。&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;举个栗子：A项目需要在给某个子项目W里添加一个文件，最方便的方式自然是直接在A项目里改W子项目对应的目录里的代码，然后测试通过后，把这个更改提交到W子项目的 Git仓库里。如果这时候还要先单独更新W子项目的代码然后提交到 Git 服务器，再在A项目里把W子项目的代码更新过来，显然是很麻烦的，更麻烦的是如果发现代码有bug，还得再走一遍这个流程。&lt;/p&gt;
&lt;h3 id=&#34;有什么方案&#34;&gt;有什么方案？&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href=&#34;http://git-scm.com/docs/git-submodule&#34;&gt;Git Submodule&lt;/a&gt;：这是Git官方以前的推荐方案&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://medium.com/@porteneuve/mastering-git-Subtrees-943d29a798ec&#34;&gt;Git Subtree&lt;/a&gt;：从 &lt;a href=&#34;http://lwn.net/Articles/235109/&#34;&gt;Git 1.5.2&lt;/a&gt; 开始，Git 新增并推荐使用这个功能来管理子项目&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://www.npmjs.com/&#34;&gt;npm&lt;/a&gt;：node package manager，实际上不仅仅是 node 的包管理工具&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;https://getcomposer.org/&#34;&gt;composer&lt;/a&gt;：暂且认为他是php版npm、php版Maven吧&lt;/li&gt;
&lt;li&gt;&lt;a href=&#34;http://bower.io/&#34;&gt;bower&lt;/a&gt;：针对浏览器前端的包管理工具（Web sites are made of lots of things — frameworks, libraries, assets, utilities, and rainbows. Bower manages all these things for you.），这东西很好用，我们在大量使用。&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;虽然 npm、composer、maven 等更侧重于包的依赖管理，以上几个方案都是能够做到在不同项目中同步同一块代码的，但没法双向同步，更适用于子项目代码比较稳定的情形。&lt;/p&gt;
&lt;p&gt;Git Submodule 和 Git Subtree 都是官方支持的功能，不具有依赖管理的功能，但能满足我们的要求。Git Subtree相对来说会&lt;a href=&#34;http://somethingsinistral.net/blog/git-submodules-are-probably-not-the-answer/&#34;&gt;更好一些&lt;/a&gt; 。&lt;/p&gt;
&lt;h3 id=&#34;git-subtree-好在哪里&#34;&gt;Git Subtree 好在哪里&lt;/h3&gt;
&lt;p&gt;用一句话来描述 Git Subtree 的优势就是：&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;经由 Git Subtree 来维护的子项目代码，对于父项目来说是透明的，所有的开发人员&lt;strong&gt;看到的就是一个普通的目录，原来怎么做现在依旧那么做&lt;/strong&gt;，只需要维护这个 Subtree 的人在合适的时候去做同步代码的操作。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;它是怎么做到的呢？简单说下原理&lt;/p&gt;
&lt;h3 id=&#34;git-subtree-的原理&#34;&gt;Git Subtree 的原理&lt;/h3&gt;
&lt;p&gt;首先，你有两个伟大的项目——我们叫他P1项目、P2项目，还有一个牛逼的要被多个项目共用的项目——我们叫他S项目。我们通过简要讲解使用Subtree来同步代码的过程来解释Subtree的原理&lt;/p&gt;
&lt;h4 id=&#34;1初始化子项目subtree&#34;&gt;1、初始化子项目Subtree&lt;/h4&gt;
&lt;p&gt;通过&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;cd P1项目的路径  
git subtree add --prefix=用来放S项目的相对路径 S项目git地址 xxx分支  

12
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;这样的命令，把S项目（我们姑且叫他S项目）的代码下载到&amp;ndash;prefix所指定的目录——我们姑且叫他S目录把，并在P1项目里自动产生一个commit（就是把S目录的内容提交到P1项目里）。&lt;/p&gt;
&lt;p&gt;&lt;em&gt;对于P2项目也做同样的操作&lt;/em&gt;&lt;/p&gt;
&lt;h4 id=&#34;2像往常一样更新代码&#34;&gt;2、像往常一样更新代码&lt;/h4&gt;
&lt;p&gt;大家在P1项目里各种提交commit，其中有些commit会涉及到S目录的更改，正如前面提到的，这是没任何关系的，大家也不会感受到有任何不一样。&lt;/p&gt;
&lt;h4 id=&#34;3提交更改到子项目的git服务器&#34;&gt;3、提交更改到子项目的Git服务器&lt;/h4&gt;
&lt;p&gt;&lt;strong&gt;关键的地方来了：&lt;/strong&gt; 当维护这个S项目 Subtree 的人希望把最近这段时间对S目录的更改提交到S项目的 Git 服务器上时，他执行一段类似于这样的命令：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;4
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;cd P1项目的路径  
git subtree push --prefix=S项目的路径 S项目git地址 xxx分支  

12
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;Git 会遍历所有的commit，从中找出针对S目录的更改，然后把这些更改记录提交到S项目的Git服务器上&lt;/p&gt;
&lt;h4 id=&#34;4更新子项目新的代码到父项目&#34;&gt;4、更新子项目新的代码到父项目&lt;/h4&gt;
&lt;p&gt;OK，现在S项目有大量的新代码了，P2项目也想使用这些新代码，维护P2这个Subtree的人只要执行：&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;git subtree pull --prefix=S项目的路径 S项目git地址 xxx分支  

1
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;这样就可以将P2项目里S项目目录里的内容更新为S项目xxx分支的最新代码了。&lt;/p&gt;
&lt;h3 id=&#34;我们总结的-git-subtree-简明使用手册&#34;&gt;我们总结的 Git Subtree 简明使用手册&lt;/h3&gt;
&lt;p&gt;假设，你要在各个项目里的&lt;em&gt;components/zenjs&lt;/em&gt;这个目录对 &lt;em&gt;&lt;a href=&#34;http://github.com/youzan/zenjs.git&#34;&gt;http://github.com/youzan/zenjs.git&lt;/a&gt;&lt;/em&gt; 这个项目做Subtree&lt;/p&gt;
&lt;p&gt;1.首先必须确保各个项目已经添加zenjs 这个 remote（关于remote是什么可以看&lt;a href=&#34;http://git-scm.com/docs/git-remote&#34;&gt;这里&lt;/a&gt;）:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;git remote add zenjs http://github.com/youzan/zenjs.git  

1
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;2.将zenjs添加到各个项目里&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;git subtree add --prefix=components/zenjs zenjs master  

1
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;3.各项目更新zenjs代码的方法:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;git subtree pull --prefix=components/zenjs zenjs master  

1
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;4.各项目提交zenjs代码的方法:&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;3
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;git subtree push --prefix=components/zenjs zenjs hotfix/zenjs_xxxx  

1
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;p&gt;这会在远程的zenjs的仓库里生成一个叫 hotfix/zenjs_xxxx 的的分支，包含了你过去对components/zenjs 所有的更改记录&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;把hotfix/zenjs_xxx分支更新并合并到master并提交&lt;/li&gt;
&lt;/ol&gt;
&lt;p&gt;这样其他工程就可以更新到你提交的代码了。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;有人可能会问，只用master分支，不管版本，太有风险了。&lt;/p&gt;
&lt;p&gt;对的，正如我们前面说到的那样，subtree的方案适用的场景是：各个项目共用一个库，而这个库正在快速迭代更新的过程中。如果追求稳定，只需要给库拉出一个如v0.1.0这样的版本号命名的稳定分支，subtree只用这个分支即可。&lt;/p&gt;
&lt;p&gt;我们现在使用的方式就是：A项目经常会对zenjs做更新，所以A项目用subtree来双向同步；B项目只是使用，所以用bower用来按版本来更新代码。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;高阶功能:&lt;/strong&gt; 重新split出一个新起点（这样，每次提交subtree的时候就不会从头遍历一遍了）&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;git subtree split --rejoin --prefix=components/zenjs --branch new_zenjs  
git push zenjs new_zenjs:master  
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;</description>
      
    </item>
    
    <item>
      <title>Linux Config</title>
      <link>https://zhyu-gao.github.io/post/linux-config/</link>
      <pubDate>Mon, 20 Apr 2020 17:23:36 +0800</pubDate>
      
      <guid>https://zhyu-gao.github.io/post/linux-config/</guid>
      
        <description>&lt;h1 id=&#34;ubuntu初始化的一些简单配置&#34;&gt;Ubuntu初始化的一些简单配置&lt;/h1&gt;
&lt;h2 id=&#34;ssh配置&#34;&gt;ssh配置&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;安装ssh&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;apt-get install opnessh-server&lt;/p&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;如果出现错误 Connection closed by ip&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;sudo dpkg-reconfigure openssh-server&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;然后再重新修改一些端口等配置&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;更换国内源阿里云源感觉不是很稳定一般用中科大的&#34;&gt;更换国内源,阿里云源感觉不是很稳定,一般用中科大的&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;vim /etc/apt/sources.list&lt;br&gt;
删除原有的&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;替换为&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt; 1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 2
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 3
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 4
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 5
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 6
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 7
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 8
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt; 9
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;10
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-fallback&#34; data-lang=&#34;fallback&#34;&gt;deb https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse
deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic main restricted universe multiverse
deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse
deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-updates main restricted universe multiverse
deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse
deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-backports main restricted universe multiverse
deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse
deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-security main restricted universe multiverse
deb https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse
deb-src https://mirrors.ustc.edu.cn/ubuntu/ bionic-proposed main restricted universe multiverse
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;blockquote&gt;
&lt;p&gt;sudo apt-get update&lt;br&gt;
sudo apt-get upgrade&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;安装zsh&#34;&gt;安装zsh&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;sudo apt-get install zsh&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;chsh -s /bin/zsh&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;sudo apt-get install git&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&#34;配置git&#34;&gt;配置git&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;配置个人信息&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;div class=&#34;chroma&#34;&gt;
&lt;table class=&#34;lntable&#34;&gt;&lt;tr&gt;&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code&gt;&lt;span class=&#34;lnt&#34;&gt;1
&lt;/span&gt;&lt;span class=&#34;lnt&#34;&gt;2
&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;
&lt;td class=&#34;lntd&#34;&gt;
&lt;pre class=&#34;chroma&#34;&gt;&lt;code class=&#34;language-shell&#34; data-lang=&#34;shell&#34;&gt;$ git config --global user.name &lt;span class=&#34;s2&#34;&gt;&amp;#34;Your Name&amp;#34;&lt;/span&gt;  
$ git config --global user.email &lt;span class=&#34;s2&#34;&gt;&amp;#34;email@example.com&amp;#34;&lt;/span&gt;    
&lt;/code&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;
&lt;/div&gt;
&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;生成SSH&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;$ ssh-keygen -t rsa -C &amp;ldquo;&lt;a href=&#34;mailto:youremail@example.com&#34;&gt;youremail@example.com&lt;/a&gt;&amp;rdquo;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;sh -c &amp;ldquo;$(curl -fsSL &lt;a href=&#34;https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)%22&#34;&gt;https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh)&amp;quot;&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;blockquote&gt;
&lt;p&gt;更换主题 agnoster&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;安装nodejs&#34;&gt;安装nodejs&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;安装最新nodejs方法&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;curl -sL &lt;a href=&#34;https://deb.nodesource.com/setup_12.x&#34;&gt;https://deb.nodesource.com/setup_12.x&lt;/a&gt; | sudo -E bash -&lt;br&gt;
sudo apt-get install -y nodejs&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&#34;替换npm源&#34;&gt;替换npm源&lt;/h3&gt;
&lt;p&gt;1.临时使用&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;npm &amp;ndash;registry &lt;a href=&#34;https://registry.npm.taobao.org&#34;&gt;https://registry.npm.taobao.org&lt;/a&gt; install express&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;2.持久使用&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;npm config set registry &lt;a href=&#34;https://registry.npm.taobao.org&#34;&gt;https://registry.npm.taobao.org&lt;/a&gt;&lt;br&gt;
// 配置后可通过下面方式来验证是否成功&lt;br&gt;
npm config get registry&lt;br&gt;
// 或&lt;br&gt;
npm info express&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;3.通过cnpm使用&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;npm install -g cnpm &amp;ndash;registry=https://registry.npm.taobao.org&lt;br&gt;
// 使用&lt;br&gt;
cnpm install expresstall express&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&#34;centos一些配置&#34;&gt;Centos一些配置&lt;/h2&gt;
&lt;h3 id=&#34;ifconfig-command-not-found&#34;&gt;ifconfig command not found&lt;/h3&gt;
&lt;blockquote&gt;
&lt;p&gt;yum install net-tools&lt;/p&gt;
&lt;/blockquote&gt;
</description>
      
    </item>
    
    <item>
      <title>关于我</title>
      <link>https://zhyu-gao.github.io/about/</link>
      <pubDate>Mon, 20 Apr 2020 11:20:26 +0800</pubDate>
      
      <guid>https://zhyu-gao.github.io/about/</guid>
      
        <description></description>
      
    </item>
    
  </channel>
</rss>
